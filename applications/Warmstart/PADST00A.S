; Do not change filenames or add or remove FILEI/FILEO statements using an editor. Use Cube/Application Manager.
RUN PGM=DISTRIBUTION PRNFILE="C:\NERPM43\APPLICATIONS\WARMSTART\FINAL DTB.PRN" MSG='Perform a Initial HBW Distribution'
FILEI LOOKUPI[1] = "C:\NERPM43\APPLICATIONS\WARMSTART\FF.CSV"
FILEI MATI[1] = "C:\NERPM43\APPLICATIONS\WARMSTART\FHSKIMS1.MAT"
FILEO MATO[1] = "C:\NERPM43\APPLICATIONS\WARMSTART\FFHBW.MAT",
 MO=1,NAME=HBW, dec=1*s

PAR MAXITERS={ATITER},MAXRMSE=2, ZONEMSG=100

    LOOKUP, LOOKUPI=1,
        INTERPOLATE=Y, NAME=FF,
        LOOKUP[1]=1,RESULT=2

    LOOKUP, LOOKUPI=2,
        INTERPOLATE=N, NAME=ATRFAC,
        LOOKUP[1]=1,RESULT=3

;   ----- SETUP THE WORKING P AND A

    SETPA P[1]=HBWKP  A[1]=HBWKA*ATRFAC(1,I)  ;Subarea balancing factor removed for testing.

;   ----- GET THE LOS MATRIX INTO WORK MATRIX 20
    MW[20] = MI.1.TIME+MI.1.TERMINALTIME
;   ----- DO 12 GRAVITY MODELS
    GRAVITY PURPOSE=1, LOS=MW[20], FFACTORS=FF
    MW[31]=MW[1]*MW[20]/60
;   ----- GENERATE FREQUENCY DISTRIBUTION REPORTS
FREQUENCY VALUEMW=1  BASEMW=20,  RANGE=1-100, TITLE='HBW CG TRIP LENGTH FREQUENCY {descr}'
;   ----- GET A COMPARISON REPORT ON LAST ITERATION
REPORT ACOMP=1 ITERATIONS=99
ENDRUN
